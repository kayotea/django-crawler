<!DOCTYPE HTML>
<html>
    <head>
        <title>Crawler: Youtube Videos</title>
        {%load staticfiles%}
        <link rel="stylesheet" href="{% static 'crawl_app/css/style.css'%}" charset="utf-8">
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
        <script type="text/javascript">
            $(document).ready(function(){
                $(document.body).on('click', '.col', function(){
                        if ($('.col').children(':nth-child('+3+')').hasClass('hideme')){
                            $('.col').children(':nth-child('+3+')').removeClass('hideme');
                            $('.col').children(':nth-child('+3+')').addClass('seeme');
                        }
                    var song1_views = $('.options').children(':nth-child('+1+')').children(':nth-child('+3+')').text();
                    var song2_views = $('.options').children(':nth-child('+2+')').children(':nth-child('+3+')').text();

                    if (song1_views > song2_views){
                        console.log('song1');
                        if ($(this).text() == $('.options').children(':nth-child('+1+')').text()){
                            console.log('correct');
                        }
                        else if ($(this).text() == $('.options').children(':nth-child('+2+')').text()){
                            console.log('incorrect');
                            $('.options').children(':nth-child('+2+')').removeClass('lightcyan');
                            $('.options').children(':nth-child('+2+')').addClass('red');
                        }
                        $('.options').children(':nth-child('+1+')').removeClass('lightcyan');
                        $('.options').children(':nth-child('+1+')').addClass('green');
                    }else{
                        console.log('song2');
                        if ($(this).text() == $('.options').children(':nth-child('+1+')').text()){
                            console.log('incorrect');
                            $('.options').children(':nth-child('+1+')').removeClass('lightcyan');
                            $('.options').children(':nth-child('+1+')').addClass('red');
                        }
                        else if ($(this).text() == $('.options').children(':nth-child('+2+')').text()){
                            console.log('correct');
                        }
                        $('.options').children(':nth-child('+2+')').removeClass('lightcyan');
                        $('.options').children(':nth-child('+2+')').addClass('green');
                    }
                    console.log($(this));
                    console.log($(this).text());
                    console.log($('.options').children(':nth-child('+2+')').text());
                    
                    for (var i = 1; i <=2; i++){
                        $('.options').children(':nth-child('+i+')').removeClass('col');
                        $('.options').children(':nth-child('+i+')').addClass('noclick');
                    }
                });
            });
        </script>
    </head>
    <body>
        <div id="wrapper">
            <h2>Which Youtube Video Has More Views?</h2>
            <ul>
                <!--{%for item in list%}
                    <li>{{item.title}}</li>
                {%endfor%}-->
            </ul>
            <p>Points: </p>
            <div class="options">
                <div class="col lightcyan">
                    <p class="big">{{song1.title}}</p> <p>by {{song1.author}}</p>
                    <p class="hideme bigish">{{song1.views}} billion views</p>
                </div>
                <div class="col lightcyan">
                    <p class="big">{{song2.title}}</p> <p>by {{song2.author}}</p>
                    <p class="hideme bigish">{{song2.views}} billion views</p>
                </div>
            </div>
            <br>
            <a href="/youtube"><p class="button bigish">Play Again!</p></a>
        </div>
    </body>
</html>